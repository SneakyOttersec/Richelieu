"""
Configuration des 185 entreprises du G7 + ETFs.
Source unique pour les tickers yfinance et TradingView.
"""

COUNTRIES = {
    "etf": {
        "name": "Index / ETF",
        "flag": "\U0001f4c8",
        "exchange": "NYSE/NASDAQ",
        "currency": "USD",
        "pea_eligible": False,
    },
    "france": {
        "name": "France",
        "flag": "\U0001f1eb\U0001f1f7",
        "exchange": "EPA",
        "currency": "EUR",
        "pea_eligible": True,
    },
    "usa": {
        "name": "\u00c9tats-Unis",
        "flag": "\U0001f1fa\U0001f1f8",
        "exchange": "NYSE/NASDAQ",
        "currency": "USD",
        "pea_eligible": False,
    },
    "uk": {
        "name": "Royaume-Uni",
        "flag": "\U0001f1ec\U0001f1e7",
        "exchange": "LSE",
        "currency": "GBP",
        "pea_eligible": False,
    },
    "germany": {
        "name": "Allemagne",
        "flag": "\U0001f1e9\U0001f1ea",
        "exchange": "XETR",
        "currency": "EUR",
        "pea_eligible": True,
    },
    "italy": {
        "name": "Italie",
        "flag": "\U0001f1ee\U0001f1f9",
        "exchange": "MIL",
        "currency": "EUR",
        "pea_eligible": True,
    },
    "japan": {
        "name": "Japon",
        "flag": "\U0001f1ef\U0001f1f5",
        "exchange": "TSE",
        "currency": "JPY",
        "pea_eligible": False,
    },
    "canada": {
        "name": "Canada",
        "flag": "\U0001f1e8\U0001f1e6",
        "exchange": "TSX",
        "currency": "CAD",
        "pea_eligible": False,
    },
}

# Chaque entreprise : (nom, ticker_yfinance, ticker_tradingview)
COMPANIES = {
    "etf": [
        ("SPDR S&P 500", "SPY", "AMEX:SPY"),
        ("Vanguard S&P 500", "VOO", "AMEX:VOO"),
        ("iShares Core S&P 500", "IVV", "AMEX:IVV"),
        ("Vanguard Total Stock", "VTI", "AMEX:VTI"),
        ("Invesco QQQ", "QQQ", "NASDAQ:QQQ"),
        ("Vanguard FTSE Developed", "VEA", "AMEX:VEA"),
        ("iShares Core MSCI EAFE", "IEFA", "AMEX:IEFA"),
        ("iShares Core US Aggregate Bond", "AGG", "AMEX:AGG"),
        ("Vanguard Total Bond", "BND", "NASDAQ:BND"),
        ("Vanguard FTSE Emerging", "VWO", "AMEX:VWO"),
    ],
    "france": [
        ("LVMH", "MC.PA", "EURONEXT:MC"),
        ("Herm\u00e8s", "RMS.PA", "EURONEXT:RMS"),
        ("L'Or\u00e9al", "OR.PA", "EURONEXT:OR"),
        ("Schneider Electric", "SU.PA", "EURONEXT:SU"),
        ("Safran", "SAF.PA", "EURONEXT:SAF"),
        ("TotalEnergies", "TTE.PA", "EURONEXT:TTE"),
        ("EssilorLuxottica", "EL.PA", "EURONEXT:EL"),
        ("BNP Paribas", "BNP.PA", "EURONEXT:BNP"),
        ("Air Liquide", "AI.PA", "EURONEXT:AI"),
        ("Sanofi", "SAN.PA", "EURONEXT:SAN"),
        ("Christian Dior", "CDI.PA", "EURONEXT:CDI"),
        ("AXA", "CS.PA", "EURONEXT:CS"),
        ("Vinci", "DG.PA", "EURONEXT:DG"),
        ("ENGIE", "ENGI.PA", "EURONEXT:ENGI"),
        ("Cr\u00e9dit Agricole", "ACA.PA", "EURONEXT:ACA"),
        ("Soci\u00e9t\u00e9 G\u00e9n\u00e9rale", "GLE.PA", "EURONEXT:GLE"),
        ("Thales", "HO.PA", "EURONEXT:HO"),
        ("Orange", "ORA.PA", "EURONEXT:ORA"),
        ("Danone", "BN.PA", "EURONEXT:BN"),
        ("Saint-Gobain", "SGO.PA", "EURONEXT:SGO"),
        ("Legrand", "LR.PA", "EURONEXT:LR"),
        ("Kering", "KER.PA", "EURONEXT:KER"),
        ("Dassault Aviation", "AM.PA", "EURONEXT:AM"),
        ("Veolia", "VIE.PA", "EURONEXT:VIE"),
        ("Michelin", "ML.PA", "EURONEXT:ML"),
    ],
    "usa": [
        ("NVIDIA", "NVDA", "NASDAQ:NVDA"),
        ("Apple", "AAPL", "NASDAQ:AAPL"),
        ("Alphabet", "GOOGL", "NASDAQ:GOOGL"),
        ("Microsoft", "MSFT", "NASDAQ:MSFT"),
        ("Amazon", "AMZN", "NASDAQ:AMZN"),
        ("Meta Platforms", "META", "NASDAQ:META"),
        ("Tesla", "TSLA", "NASDAQ:TSLA"),
        ("Broadcom", "AVGO", "NASDAQ:AVGO"),
        ("Berkshire Hathaway", "BRK-B", "NYSE:BRK.B"),
        ("Walmart", "WMT", "NYSE:WMT"),
        ("Eli Lilly", "LLY", "NYSE:LLY"),
        ("JPMorgan Chase", "JPM", "NYSE:JPM"),
        ("ExxonMobil", "XOM", "NYSE:XOM"),
        ("Visa", "V", "NYSE:V"),
        ("Johnson & Johnson", "JNJ", "NYSE:JNJ"),
        ("Micron Technology", "MU", "NASDAQ:MU"),
        ("Mastercard", "MA", "NYSE:MA"),
        ("Costco", "COST", "NASDAQ:COST"),
        ("Oracle", "ORCL", "NYSE:ORCL"),
        ("AbbVie", "ABBV", "NYSE:ABBV"),
        ("Procter & Gamble", "PG", "NYSE:PG"),
        ("Bank of America", "BAC", "NYSE:BAC"),
        ("Home Depot", "HD", "NYSE:HD"),
        ("Chevron", "CVX", "NYSE:CVX"),
        ("GE Aerospace", "GE", "NYSE:GE"),
    ],
    "uk": [
        ("HSBC", "HSBA.L", "LSE:HSBA"),
        ("AstraZeneca", "AZN.L", "LSE:AZN"),
        ("Shell", "SHEL.L", "LSE:SHEL"),
        ("Rio Tinto", "RIO.L", "LSE:RIO"),
        ("Unilever", "ULVR.L", "LSE:ULVR"),
        ("Rolls-Royce", "RR.L", "LSE:RR"),
        ("British American Tobacco", "BATS.L", "LSE:BATS"),
        ("ARM Holdings", "ARM", "NASDAQ:ARM"),
        ("GSK", "GSK.L", "LSE:GSK"),
        ("BP", "BP.L", "LSE:BP"),
        ("National Grid", "NG.L", "LSE:NG"),
        ("Barclays", "BARC.L", "LSE:BARC"),
        ("Lloyds Banking", "LLOY.L", "LSE:LLOY"),
        ("BAE Systems", "BA.L", "LSE:BA"),
        ("NatWest", "NWG.L", "LSE:NWG"),
        ("RELX", "REL.L", "LSE:REL"),
        ("LSEG", "LSEG.L", "LSE:LSEG"),
        ("Antofagasta", "ANTO.L", "LSE:ANTO"),
        ("Standard Chartered", "STAN.L", "LSE:STAN"),
        ("Reckitt", "RKT.L", "LSE:RKT"),
        ("Anglo American", "AAL.L", "LSE:AAL"),
        ("Compass Group", "CPG.L", "LSE:CPG"),
        ("Diageo", "DGE.L", "LSE:DGE"),
        ("Glencore", "GLEN.L", "LSE:GLEN"),
        ("3i Group", "III.L", "LSE:III"),
    ],
    "germany": [
        ("SAP", "SAP.DE", "XETR:SAP"),
        ("Siemens", "SIE.DE", "XETR:SIE"),
        ("Deutsche Telekom", "DTE.DE", "XETR:DTE"),
        ("Allianz", "ALV.DE", "XETR:ALV"),
        ("Siemens Energy", "ENR.DE", "XETR:ENR"),
        ("Rheinmetall", "RHM.DE", "XETR:RHM"),
        ("Munich RE", "MUV2.DE", "XETR:MUV2"),
        ("Infineon", "IFX.DE", "XETR:IFX"),
        ("Deutsche Bank", "DBK.DE", "XETR:DBK"),
        ("DHL Group", "DHL.DE", "XETR:DHL"),
        ("Merck KGaA", "MRK.DE", "XETR:MRK"),
        ("BMW", "BMW.DE", "XETR:BMW"),
        ("Mercedes-Benz", "MBG.DE", "XETR:MBG"),
        ("Volkswagen", "VOW3.DE", "XETR:VOW3"),
        ("E.ON", "EOAN.DE", "XETR:EOAN"),
        ("Siemens Healthineers", "SHL.DE", "XETR:SHL"),
        ("BASF", "BAS.DE", "XETR:BAS"),
        ("Deutsche B\u00f6rse", "DB1.DE", "XETR:DB1"),
        ("Bayer", "BAYN.DE", "XETR:BAYN"),
        ("Commerzbank", "CBK.DE", "XETR:CBK"),
        ("RWE", "RWE.DE", "XETR:RWE"),
        ("Porsche AG", "P911.DE", "XETR:P911"),
        ("Henkel", "HEN3.DE", "XETR:HEN3"),
        ("HeidelbergCement", "HEI.DE", "XETR:HEI"),
        ("Daimler Truck", "DTG.DE", "XETR:DTG"),
    ],
    "italy": [
        ("UniCredit", "UCG.MI", "MIL:UCG"),
        ("Intesa Sanpaolo", "ISP.MI", "MIL:ISP"),
        ("Enel", "ENEL.MI", "MIL:ENEL"),
        ("ENI", "ENI.MI", "MIL:ENI"),
        ("Ferrari", "RACE.MI", "MIL:RACE"),
        ("Generali", "G.MI", "MIL:G"),
        ("Leonardo", "LDO.MI", "MIL:LDO"),
        ("Poste Italiane", "PST.MI", "MIL:PST"),
        ("Prysmian", "PRY.MI", "MIL:PRY"),
        ("Monte dei Paschi", "BMPS.MI", "MIL:BMPS"),
        ("BPER Banca", "BPE.MI", "MIL:BPE"),
        ("Snam", "SRG.MI", "MIL:SRG"),
        ("Terna", "TRN.MI", "MIL:TRN"),
        ("Banco BPM", "BAMI.MI", "MIL:BAMI"),
        ("Moncler", "MONC.MI", "MIL:MONC"),
        ("Mediobanca", "MB.MI", "MIL:MB"),
        ("Unipol", "UNI.MI", "MIL:UNI"),
        ("Banca Mediolanum", "BMED.MI", "MIL:BMED"),
        ("Telecom Italia", "TIT.MI", "MIL:TIT"),
        ("FinecoBank", "FBK.MI", "MIL:FBK"),
        ("Italgas", "IG.MI", "MIL:IG"),
        ("Technoprobe", "TPRO.MI", "MIL:TPRO"),
        ("Edison", "EDNR.MI", "MIL:EDNR"),
        ("Recordati", "REC.MI", "MIL:REC"),
        ("Amplifon", "AMP.MI", "MIL:AMP"),
    ],
    "japan": [
        ("Toyota", "7203.T", "TSE:7203"),
        ("MUFJ", "8306.T", "TSE:8306"),
        ("SoftBank Group", "9984.T", "TSE:9984"),
        ("Hitachi", "6501.T", "TSE:6501"),
        ("SMFG", "8316.T", "TSE:8316"),
        ("Sony", "6758.T", "TSE:6758"),
        ("Fast Retailing", "9983.T", "TSE:9983"),
        ("Tokyo Electron", "8035.T", "TSE:8035"),
        ("Advantest", "6857.T", "TSE:6857"),
        ("Mitsubishi Corp", "8058.T", "TSE:8058"),
        ("Mizuho", "8411.T", "TSE:8411"),
        ("Chugai Pharmaceutical", "4519.T", "TSE:4519"),
        ("MHI", "7011.T", "TSE:7011"),
        ("Mitsui & Co", "8031.T", "TSE:8031"),
        ("Keyence", "6861.T", "TSE:6861"),
        ("ITOCHU", "8001.T", "TSE:8001"),
        ("NTT", "9432.T", "TSE:9432"),
        ("Tokio Marine", "8766.T", "TSE:8766"),
        ("Mitsubishi Electric", "6503.T", "TSE:6503"),
        ("Shin-Etsu Chemical", "4063.T", "TSE:4063"),
        ("Japan Post Bank", "7182.T", "TSE:7182"),
        ("Japan Tobacco", "2914.T", "TSE:2914"),
        ("Nintendo", "7974.T", "TSE:7974"),
        ("KDDI", "9433.T", "TSE:9433"),
        ("Hoya", "7741.T", "TSE:7741"),
    ],
    "canada": [
        ("Royal Bank of Canada", "RY.TO", "TSX:RY"),
        ("TD Bank", "TD.TO", "TSX:TD"),
        ("Shopify", "SHOP.TO", "TSX:SHOP"),
        ("Agnico Eagle Mines", "AEM.TO", "TSX:AEM"),
        ("Enbridge", "ENB.TO", "TSX:ENB"),
        ("BMO", "BMO.TO", "TSX:BMO"),
        ("Brookfield Corp", "BN.TO", "TSX:BN"),
        ("CIBC", "CM.TO", "TSX:CM"),
        ("Scotiabank", "BNS.TO", "TSX:BNS"),
        ("Canadian National Railway", "CNR.TO", "TSX:CNR"),
        ("Barrick Gold", "ABX.TO", "TSX:ABX"),
        ("Brookfield Asset Mgmt", "BAM.TO", "TSX:BAM"),
        ("CPKC", "CP.TO", "TSX:CP"),
        ("Wheaton Precious Metals", "WPM.TO", "TSX:WPM"),
        ("Suncor Energy", "SU.TO", "TSX:SU"),
        ("Nutrien", "NTR.TO", "TSX:NTR"),
        ("TC Energy", "TRP.TO", "TSX:TRP"),
        ("Manulife", "MFC.TO", "TSX:MFC"),
        ("Imperial Oil", "IMO.TO", "TSX:IMO"),
        ("Couche-Tard", "ATD.TO", "TSX:ATD"),
        ("Loblaw", "L.TO", "TSX:L"),
        ("National Bank", "NA.TO", "TSX:NA"),
        ("Franco-Nevada", "FNV.TO", "TSX:FNV"),
        ("Cameco", "CCO.TO", "TSX:CCO"),
        ("Thomson Reuters", "TRI.TO", "TSX:TRI"),
    ],
}


ISINS = {
    # ETFs
    "SPY": "US78462F1030", "VOO": "US9229083632", "IVV": "US4642872000",
    "VTI": "US9229087690", "QQQ": "US46090E1038", "VEA": "US9219438580",
    "IEFA": "US46434V7617", "AGG": "US4642872265", "BND": "US9219378356",
    "VWO": "US9220428588",
    # France
    "MC.PA": "FR0000121014", "RMS.PA": "FR0000052292", "OR.PA": "FR0000120321",
    "SU.PA": "FR0000121972", "SAF.PA": "FR0000073272", "TTE.PA": "FR0000120271",
    "EL.PA": "FR0000121667", "BNP.PA": "FR0000131104", "AI.PA": "FR0000120073",
    "SAN.PA": "FR0000120578", "CDI.PA": "FR0000130403", "CS.PA": "FR0000120628",
    "DG.PA": "FR0000125486", "ENGI.PA": "FR0010208488", "ACA.PA": "FR0000045072",
    "GLE.PA": "FR0000130809", "HO.PA": "FR0000121329", "ORA.PA": "FR0000133308",
    "BN.PA": "FR0000120644", "SGO.PA": "FR0000125007", "LR.PA": "FR0010307819",
    "KER.PA": "FR0000121485", "AM.PA": "FR0000121725", "VIE.PA": "FR0000124141",
    "ML.PA": "FR0000121261",
    # USA
    "NVDA": "US67066G1040", "AAPL": "US0378331005", "GOOGL": "US02079K3059",
    "MSFT": "US5949181045", "AMZN": "US0231351067", "META": "US30303M1027",
    "TSLA": "US88160R1014", "AVGO": "US11135F1012", "BRK-B": "US0846707026",
    "WMT": "US9311421039", "LLY": "US5324571083", "JPM": "US46625H1005",
    "XOM": "US30231G1022", "V": "US92826C8394", "JNJ": "US4781601046",
    "MU": "US5951121038", "MA": "US57636Q1040", "COST": "US22160K1051",
    "ORCL": "US68389X1054", "ABBV": "US00287Y1091", "PG": "US7427181091",
    "BAC": "US0605051046", "HD": "US4370761029", "CVX": "US1667641005",
    "GE": "US3696043013",
    # UK
    "HSBA.L": "GB0005405286", "AZN.L": "GB0009895292", "SHEL.L": "GB00BP6MXD84",
    "RIO.L": "GB0007188757", "ULVR.L": "GB00B10RZP78", "RR.L": "GB00B63H8491",
    "BATS.L": "GB0002875804", "ARM": "US0420682058", "GSK.L": "GB00BN7SWP63",
    "BP.L": "GB0007980591", "NG.L": "GB00BDR05C01", "BARC.L": "GB0031348658",
    "LLOY.L": "GB0008706128", "BA.L": "GB0002634946", "NWG.L": "GB00BM8PJY71",
    "REL.L": "GB00B2B0DG97", "LSEG.L": "GB00B0SWJX34", "ANTO.L": "GB0000456144",
    "STAN.L": "GB0004082847", "RKT.L": "GB00B24CGK77", "AAL.L": "GB00B1XZS820",
    "CPG.L": "GB00BD6K4575", "DGE.L": "GB0002374006", "GLEN.L": "JE00B4T3BW64",
    "III.L": "GB00B1YW4409",
    # Germany
    "SAP.DE": "DE0007164600", "SIE.DE": "DE0007236101", "DTE.DE": "DE0005557508",
    "ALV.DE": "DE0008404005", "ENR.DE": "DE000ENER6Y0", "RHM.DE": "DE0007030009",
    "MUV2.DE": "DE0008430026", "IFX.DE": "DE0006231004", "DBK.DE": "DE0005140008",
    "DHL.DE": "DE0005552004", "MRK.DE": "DE0006599905", "BMW.DE": "DE0005190003",
    "MBG.DE": "DE0007100000", "VOW3.DE": "DE0007664039", "EOAN.DE": "DE000ENAG999",
    "SHL.DE": "DE000SHL1006", "BAS.DE": "DE000BASF111", "DB1.DE": "DE0005810055",
    "BAYN.DE": "DE000BAY0017", "CBK.DE": "DE000CBK1001", "RWE.DE": "DE0007037129",
    "P911.DE": "DE000PAG9113", "HEN3.DE": "DE0006048432", "HEI.DE": "DE0006047004",
    "DTG.DE": "DE000DTR0CK8",
    # Italy
    "UCG.MI": "IT0005239360", "ISP.MI": "IT0000072618", "ENEL.MI": "IT0003128367",
    "ENI.MI": "IT0003132476", "RACE.MI": "NL0011585146", "G.MI": "IT0000062072",
    "LDO.MI": "IT0003856405", "PST.MI": "IT0003796171", "PRY.MI": "IT0004176001",
    "BMPS.MI": "IT0005508921", "BPE.MI": "IT0000066123", "SRG.MI": "IT0003153415",
    "TRN.MI": "IT0003242622", "BAMI.MI": "IT0005218380", "MONC.MI": "IT0004965148",
    "MB.MI": "IT0000062957", "UNI.MI": "IT0004810054", "BMED.MI": "IT0004776628",
    "TIT.MI": "IT0003497168", "FBK.MI": "IT0000072170", "IG.MI": "IT0005211237",
    "TPRO.MI": "IT0005482333", "EDNR.MI": "IT0003152417", "REC.MI": "IT0003828271",
    "AMP.MI": "IT0004056880",
    # Japan
    "7203.T": "JP3633400001", "8306.T": "JP3902900004", "9984.T": "JP3436100006",
    "6501.T": "JP3788600009", "8316.T": "JP3890350006", "6758.T": "JP3435000009",
    "9983.T": "JP3802300008", "8035.T": "JP3571400005", "6857.T": "JP3122400009",
    "8058.T": "JP3898400001", "8411.T": "JP3885780001", "4519.T": "JP3519400000",
    "7011.T": "JP3900000005", "8031.T": "JP3893600001", "6861.T": "JP3236200006",
    "8001.T": "JP3143600009", "9432.T": "JP3735400008", "8766.T": "JP3910660004",
    "6503.T": "JP3902400005", "4063.T": "JP3371200001", "7182.T": "JP3946750001",
    "2914.T": "JP3726800000", "7974.T": "JP3756600007", "9433.T": "JP3496400007",
    "7741.T": "JP3837800006",
    # Canada
    "RY.TO": "CA7800871021", "TD.TO": "CA8911605092", "SHOP.TO": "CA82509L1076",
    "AEM.TO": "CA0084741085", "ENB.TO": "CA29250N1050", "BMO.TO": "CA0636711016",
    "BN.TO": "CA11271J1075", "CM.TO": "CA1360691010", "BNS.TO": "CA0641491075",
    "CNR.TO": "CA1363751027", "ABX.TO": "CA0679011084", "BAM.TO": "CA1130041058",
    "CP.TO": "CA13645T1003", "WPM.TO": "CA9628791027", "SU.TO": "CA8672241079",
    "NTR.TO": "CA67077M1086", "TRP.TO": "CA87807B1076", "MFC.TO": "CA56501R1064",
    "IMO.TO": "CA4530384086", "ATD.TO": "CA0225001045", "L.TO": "CA5394681027",
    "NA.TO": "CA6330671034", "FNV.TO": "CA3518581051", "CCO.TO": "CA13321L1085",
    "TRI.TO": "CA8849037095",
}

INDICES = {
    "^FCHI": {"name": "CAC 40", "country": "france", "color": "#2bbc8a"},
    "^GSPC": {"name": "S&P 500", "country": "usa", "color": "#6699cc"},
    "^FTSE": {"name": "FTSE 100", "country": "uk", "color": "#e06c75"},
    "^GDAXI": {"name": "DAX", "country": "germany", "color": "#e6c07b"},
    "FTSEMIB.MI": {"name": "FTSE MIB", "country": "italy", "color": "#d19a66"},
    "^N225": {"name": "Nikkei 225", "country": "japan", "color": "#c678dd"},
    "^GSPTSE": {"name": "S&P/TSX", "country": "canada", "color": "#56b6c2"},
    "URTH": {"name": "MSCI World", "country": "world", "color": "#d480aa"},
}

# Nominatif benefits for French companies (prime de fidelite)
# Only companies with confirmed loyalty bonuses are listed
NOMINATIF_BENEFITS = {
    "AI.PA": "+10% dividend & +10% free shares after 2 yrs registered",
    "OR.PA": "+10% dividend after 2 yrs registered",
    "ENGI.PA": "+10% dividend after 2 yrs registered",
    "EL.PA": "+10% dividend after 2 yrs registered",
    "SGO.PA": "+10% dividend after 2 yrs registered",
}


def get_all_companies():
    """Retourne la liste plate de toutes les entreprises avec metadata pays."""
    result = []
    for country_id, companies in COMPANIES.items():
        country_info = COUNTRIES[country_id]
        for name, yf_ticker, tv_ticker in companies:
            result.append({
                "name": name,
                "ticker": yf_ticker,
                "tv_ticker": tv_ticker,
                "country": country_id,
                "country_name": country_info["name"],
                "flag": country_info["flag"],
                "exchange": country_info["exchange"],
                "currency": country_info["currency"],
                "pea_eligible": country_info["pea_eligible"],
                "isin": ISINS.get(yf_ticker),
                "nominatif_benefit": NOMINATIF_BENEFITS.get(yf_ticker),
            })
    return result


def ticker_to_filename(ticker):
    """Convertit un ticker en nom de fichier (MC.PA â†’ MC_PA)."""
    return ticker.replace(".", "_").replace("-", "_")
